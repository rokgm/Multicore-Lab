import matplotlib.pyplot as plt
import numpy as np

########
# DATA #
########
across_nodes = np.array([
    [0, 0.177092],     
    [1, 1.197487],     
    [2, 2.478861],     
    [3, 4.985742],     
    [4, 8.707044],     
    [5, 17.028317],    
    [6, 34.466801],    
    [7, 67.390618],    
    [8, 132.849020],   
    [9, 253.330560],   
    [10, 472.898057],   
    [11, 826.246192],   
    [12, 1340.826960],  
    [13, 1979.719795],  
    [14, 2328.610426],  
    [15, 3372.367333],  
    [16, 2231.885149],  
    [17, 4814.494657],  
    [18, 6912.348460],  
    [19, 8669.347834],  
    [20, 9715.675021],  
    [21, 10109.555271], 
    [22, 10571.748217], 
    [23, 11018.630401], 
    [24, 11505.777960],
])

across_sockets = np.array([
    [0, 0.124440],   
    [1, 0.794776],   
    [2, 1.391218],   
    [3, 3.566360],   
    [4, 6.080078],   
    [5, 12.309142],  
    [6, 23.927394],  
    [7, 56.175490],  
    [8, 82.774605],  
    [9, 153.958725], 
    [10,269.792322],  
    [11,658.508491],  
    [12,888.243024],  
    [13,1702.689319], 
    [14,2570.078312], 
    [15,3295.774672], 
    [16,3783.876119], 
    [17,3901.441745], 
    [18,4106.054696], 
    [19,4160.895000], 
    [20,3783.354806], 
    [21,3993.004552], 
    [22,4576.360092], 
    [23,5286.019287], 
    [24,5577.791317],
])

one_socket = np.array([
    [0, 0.137932],   
    [1, 0.777848],   
    [2, 1.679559],   
    [3, 3.916265],   
    [4, 5.790317],   
    [5, 9.533250],   
    [6, 21.840668],  
    [7, 51.699877],  
    [8, 84.271846],  
    [9, 184.916184], 
    [10,258.769505], 
    [11,715.594942], 
    [12,1128.167071],
    [13,1774.980431],
    [14,2302.943585],
    [15,2968.293662],
    [16,3887.131645],
    [17,3857.872084],
    [18,4028.679545],
    [19,4030.669848],
    [20,3709.005934],
    [21,3929.612179],
    [22,4459.755768],
    [23,5220.518866],
    [24,5577.760230],
])

#########
# PLOTS #
#########

fig, ax1 = plt.subplots(nrows=1, ncols=1, figsize=(8, 5))

ax1.set_xlabel("Message Size [Byte]")
ax1.set_ylabel("Bandwidth [MByte/s]")
ax1.plot(across_nodes[:,0], across_nodes[:,1], '.-', label="across nodes")
ax1.plot(across_sockets[:,0], across_sockets[:,1], '.-', label="across sockets")
ax1.plot(one_socket[:,0], one_socket[:,1], '.-', label="one socket")
ax1.set_xticks(across_nodes[:,0])
xlables = [str(int(i)) for i in across_nodes[:,0]]
ax1.set_xticklabels([r"$2^{" + i + r"}$" for i in xlables])

ax1.set_title("Group 2:  Bandwidth for Communication")
ax1.grid(True, linestyle='--')
ax1.legend()
plt.tight_layout()
plt.savefig("group2_bandwidth.png", dpi=200)
plt.show()
plt.close()
